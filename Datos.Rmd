---
title: "Ejemplo"
output: html_document
date: "2023-09-26"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(moments) 
library(gmodels) 
library(scales)
library(survival) 
library(zoo) 
library(quantmod) 
library(vcd) 
library(vcdExtra)
library(faraway) 
library(Hmisc) 
library(car) 
library(MASS) 
library(latticeExtra)
library(dplyr) 
library(tidyr) 
library(ggplot2)
library(gcookbook)


#setwd('C:/Users/angyp/Desktop/Universidad 2023_2024/Mineria de Datos/Trabajo Mineria de Datos')
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

Ejemplo de que escribo texto.


# Nivel 1

Tal tal

## Nivel 2

bla bla

### Nivel 3

 Ejemplo
 
# Training Test

```{r}
# TRAIN TEST VALIDATION
numero_total = nrow(datos)
set.seed(123456) # reproductivilidad
# 50% para TRAIN
indices_train = sample(1:numero_total, .5*numero_total)
Datos_Train = datos[indices_train,]
# 25% para TEST
indices = seq(1:numero_total)
indices_test = sample(indices[-indices_train], .25*numero_total)
Datos_Test = datos[indices_test,]
# 25% para VALIDATION
indices_validation = indices[-c(indices_train,indices_test)]
```



```{r}
datos <- read.csv('datos/AdultBueno.csv', sep = ';')

```


```{r}
str(datos)
```

Hacemos un resumen rapido de los datos con la funcion summary:

```{r}
summary(datos[,c("Age","fnlwgt","Education.num","Capital.gain","Capital.loss","Hours.per.week")])
media = mean(datos$Capital.gain, na.rm =  TRUE) # le decimos que no tenga en cuenta los NA al hacer la media
```
```{r}
library(Hmisc)
describe(datos)
```
```{r}
#Grafico pairs
Cuantitativo= data.frame(Age=Datos_Train$Age,FNLWGT=Datos_Train$fnlwgt,CapitalGain=Datos_Train$Capital.gain,CapitalLoss=Datos_Train$Capital.loss,Horas=Datos_Train$Hours.per.week)

Cuantitativo2= data.frame(Age=Datos_Train$Age,CapitalGain=Datos_Train$Capital.gain,CapitalLoss=Datos_Train$Capital.loss,Horas=Datos_Train$Hours.per.week)

Cualitativo=data.frame(Workclass=Datos_Train$Workclass,education=Datos_Train$Education,estado_civil=Datos_Train$Marital.status,trabajo=Datos_Train$Occupation.,relationship=Datos_Train$Relationship,raza=Datos_Train$Race,sexo=Datos_Train$Sex,pais=Datos_Train$Native.country,ganacias=Datos_Train$Income.)

pairs(Cuantitativo)
plot(datos$Age,datos$Hours.per.week)
cor(Cuantitativo)
```



```{r}
#Diagramas de dispersion
qplot(Hours.per.week, fnlwgt, data = datos, colour = factor(Sex))+ geom_smooth()+
ggtitle('Relación horas trabajadas por salario.Por género')
```

```{r}
#Histograma para la variable edad
ggplot(Cuantitativo, aes(x = Age)) +
geom_histogram(fill="white", colour="black") +
ggtitle('Histograma de numero de valores de la edad asociada')

#Resto histogramas
```
Estudiamos la relacion entre las variables *sexo* y *capital.gain*

```{r}

```
#Componentes Principales

```{r}
#Vemos los primeros datos
head(Datos_Train)

prcomp(Cuantitativo,scale=T)
plot(prcomp(Cuantitativo,scale=T))
summary(prcomp(Cuantitativo,scale=T))
par(mfrow=c(2,3))
plot(prcomp(Cuantitativo,scale=T)$x[,1:2])
plot(prcomp(Cuantitativo,scale=T)$x[,c(1,3)])
plot(prcomp(Cuantitativo,scale=T)$x[,c(1,4)])
plot(prcomp(Cuantitativo,scale=T)$x[,c(2,3)])
plot(prcomp(Cuantitativo,scale=T)$x[,c(2,4)])
plot(prcomp(Cuantitativo,scale=T)$x[,c(3,4)])
```

